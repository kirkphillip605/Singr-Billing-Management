// prisma/schema.prisma

    generator client {
      provider = "prisma-client-js"
    }

    datasource db {
      provider = "postgresql"
      url      = env("DATABASE_URL")
    }

    model User {
      id             String   @id @default(uuid())
      firstName      String
      lastName       String
      businessName   String?
      phone          String?
      email          String   @unique
      passwordHash   String
      billingAddress String?
      city           String?
      state          String?
      zip            String?
      createdAt      DateTime @default(now())
      updatedAt      DateTime @updatedAt
      customer       StripeCustomer?
      subscriptions  Subscription[]
    }

    model PasswordResetToken {
      id         String   @id @default(uuid())
      user       User     @relation(fields: [userId], references: [id])
      userId     String
      token      String   @unique
      expiresAt  DateTime
      usedAt     DateTime?
    }

    model StripeCustomer {
      id                   String   @id @default(uuid())
      user                 User     @relation(fields: [userId], references: [id])
      userId               String   @unique
      stripeCustomerId     String   @unique
      createdAt            DateTime @default(now())
    }

    model Subscription {
      id                      String   @id @default(uuid())
      user                    User     @relation(fields: [userId], references: [id])
      userId                  String
      stripeSubscriptionId    String   @unique
      planInterval            String
      status                  String
      currentPeriodStart      DateTime?
      currentPeriodEnd        DateTime?
      cancelAtPeriodEnd       Boolean  @default(false)
      createdAt               DateTime @default(now())
      updatedAt               DateTime @updatedAt
    }

    model Plan {
      id             String @id               // e.g. "monthly"
      stripePriceId  String
      name           String
      interval       String                   // "month","quarter","semiannual","year"
      amountCents    Int
    }
